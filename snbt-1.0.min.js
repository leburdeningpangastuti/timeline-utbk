function pasteString(e){var t=e.substring(0,12),a=e.substring(12,14),n=e.substring(14,16),r=e.substring(16,20);$("#nopes").val(t),$("#day").val(a),$("#month").val(n),$("#year").val(r),$("#search").focus()}function search(){hideErrorMessage();var e=$("#nopes").val(),t=$("#day").val(),a=$("#month").val(),n=$("#year").val();if(t=t.toString().padStart(2,"0"),a=a.toString().padStart(2,"0"),!$("#statement").is(":checked")){showErrorMessage("Mohon untuk mencentang pernyataan terlebih dahulu.");return}if(e&&t&&a&&n){var r="";12!=e.length&&(r="Nomor peserta UTBK-SNBT tidak sesuai."),r&&showErrorMessage(r)}else{showErrorMessage("Mohon isi nomor peserta UTBK-SNBT, tanggal, bulan, dan tahun lahir Anda.");return}var i=e.toString()+t.toString()+a.toString()+n.toString(),s=getPath(i),o=i,h=dataurl+"/data/data/"+s+"/"+o+".dwg";$.ajax({type:"GET",dataType:"json",url:h,beforeSend:function(e){e.overrideMimeType&&e.overrideMimeType("application/json"),gtag("event","play",{event_category:"Request Name",event_action:"Request",event_label:"Get Data"})},success:function(e){showResult(e,s,o),gtag("event","play",{event_category:"Request Name",event_action:"Request",event_label:"Success"})},error:function(e,t,a){console.log("Error occured: "+t),console.log("XHR status: "+e.status),"error"===t&&0===e.status?(showErrorMessage("Terjadi permasalahan pada network."),gtag("event","play",{event_category:"Request Name",event_action:"Request",event_label:"CORS error"})):"error"===t&&404===e.status?(showErrorMessage("Nomor peserta UTBK-SNBT dan/atau tanggal lahir tidak ditemukan. Pastikan nomor peserta UTBK-SNBT dan tanggal lahir yang Anda masukkan sudah benar."),gtag("event","play",{event_category:"Request Name",event_action:"Request",event_label:"404"})):(showErrorMessage("Terjadi kesalahan."),gtag("event","play",{event_category:"Request Name",event_action:"Request",event_label:e.status}))}})}function showResult(e,t,a){var n=e.no.substring(0,2)+" - "+e.no.substring(2,6)+" - "+e.no.substring(6),r=e.dob.substring(0,2)+" - "+e.dob.substring(2,4)+" - "+e.dob.substring(4);if(e.ac){var i=dataurl+"/data/qrimg/"+t+"/"+a+".png";showAccepted(n,e.na,r,e.kpt,e.npt,e.kps,e.nps,e.bm,e.upt,i)}else showNotAccepted(n,e.na)}function showAccepted(e,t,a,n,r,i,s,o,h,c){hideErrorMessage(),hideMain(),hideNotAccepted(),$("#no-peserta-diterima").html(e),$("#nama-peserta-diterima").html(t),$("#tgllahir-peserta-diterima").html(a),$("#kode-ptn-terima").html(n),$("#nama-ptn-terima").html(r),$("#kode-prodi-terima").html(i),$("#nama-prodi-terima").html(s),o?$("#bidik-misi").show():$("#bidik-misi").hide(),$("#url-daftar").attr("href",h),$("#qr-terima").attr("src",c),$("#accepted").show(),$("#accepted-back").focus()}function hideAccepted(){$("#accepted").hide()}function showNotAccepted(e,t){hideErrorMessage(),hideMain(),hideAccepted(),$("#nama-peserta-tidak-terima").html(t),$("#no-peserta-tidak-diterima").html(e),$("#not-accepted").show(),$("#not-accepted-back").focus()}function hideNotAccepted(){$("#not-accepted").hide()}function showErrorMessage(e){$("#error-msg").html(e),$("#error").show()}function hideErrorMessage(){$("#error").hide()}function showMain(){hideErrorMessage(),hideAccepted(),hideNotAccepted(),$("#main").show(),$("#nopes").focus()}function hideMain(){$("#main").hide()}function hashString(e){var t=0,a=e.length,n=0;if(a>0)for(;n<a;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t}function getPath(e){var t=hashString(e);return(255&t).toString().padStart(3,"0")+"/"+(t>>8&255).toString().padStart(3,"0")}$(document).ready(function(){$("#nopes").focus(),$("#search").prop("disabled",!0),$("#search").on("click",function(){search()}),$("#back").on("click",function(){showMain()}),$("#statement").on("change",function(){$("#statement").is(":checked")?$("#search").prop("disabled",!1):$("#search").prop("disabled",!0)});var e=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];$("#nopes").keydown(function(t){return!!((t.ctrlKey||t.metaKey)&&86==t.which||$.inArray(t.which,e)>=0)||(this.value.length>=12?($("#day").text(""),$("#day").focus(),!1):!t.shiftKey&&!(t.which<48)&&!(t.which>58)&&void 0)}).keyup(function(){if(this.value.length>=12)return $("#day").focus(),!1}),$("#day").keydown(function(t){if(8==t.which&&0==this.value.length)$("#nopes").focus();else if($.inArray(t.which,e)>=0)return!0;else if(this.value.length>=$(this).attr("maxlength"))return $("#month").text(""),$("#month").focus(),!1;else if(t.shiftKey||t.which<48||t.which>58)return!1}).keyup(function(){if(this.value.length>=$(this).attr("maxlength"))return $("#month").focus(),!1}),$("#month").keydown(function(t){if(8==t.which&&0==this.value.length)$("#day").focus();else if($.inArray(t.which,e)>=0)return!0;else if(this.value.length>=$(this).attr("maxlength"))return $("#year").text(""),$("#year").focus(),!1;else if(t.shiftKey||t.which<48||t.which>58)return!1}).keyup(function(){if(this.value.length>=$(this).attr("maxlength"))return $("#year").focus(),!1}),$("#year").keydown(function(t){if(8==t.which&&0==this.value.length)$("#month").focus();else if($.inArray(t.which,e)>=0)return!0;else if(this.value.length>=$(this).attr("maxlength"))return $("#search").focus(),!1;else if(t.shiftKey||t.which<48||t.which>58)return!1}).keyup(function(){if(this.value.length>=$(this).attr("maxlength"))return $("#search").focus(),!1}),$("#search").keydown(function(e){8==e.which&&0==this.value.length&&$("#year").focus()});var t=$("input"),a=/^\d+$/;t.on("input.fromManual",function(){a.test($(this).val())||$(this).val("")}),$("#nopes").on("paste",function(){var e=$(this);e.attr("maxlength",20);var t=e.val();e.val(""),e.one("input.fromPaste",function(){var n=($currentInputBox=$(this)).val();20==n.length&&a.test(n)?pasteString(n):12==n.length&&a.test(n)?$("#nopes").val(n):e.val(t),e.attr("maxlength",12)})})});